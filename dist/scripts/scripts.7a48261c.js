"use strict";var app=angular.module("crossCheckApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","firebase"]).constant("FIREBASE_URL","https://amber-fire-3032.firebaseio.com/");app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/login.html",controller:"AuthCtrl"}).when("/list",{templateUrl:" views/list.html",controller:"ListCtrl"}).otherwise({redirectTo:"/"})}]),app.controller("AuthCtrl",["$location","$scope","$rootScope","Auth",function(a,b,c,d){b.login=function(b){d.login(b),a.path("/list")},b.$on("$firebaseSimpleLogin:login",function(){a.path("/")})}]),app.controller("ListCtrl",["Team","List","$scope",function(a,b,c){c.items=b.all,c.teamSize=a.all.length,c.totalChecks=function(a){for(var c=[],d=0;d<b.checks(a);d++)c.push(d);return c},c.checks=function(a){return c.items[a].checked},c.checkItem=function(a){b.check(a)},c.addItem=function(){b.add({item:c.item.description,checked:0}),c.item={description:""}},c.checked=function(a){return 1==a.checks?!0:void 0},c.resetList=function(){var a=confirm("Are you sure you want to reset the list?");a&&b.resetList()}}]),app.controller("NavCtrl",["$location","$scope","User",function(a,b,c){b.user=c.getCurrent(),b.signedIn=function(){return c.signedIn()},b.home=function(){a.path("/")}}]),app.factory("List",["$rootScope","$firebase","FIREBASE_URL",function(a,b,c){var d=new Firebase(c+"items"),e=b(d).$asArray(),f=a.currentUser;console.log(f);var g={all:e,add:function(a){e.$add(a)},remove:function(a){e.$remove(a)},check:function(a){e[a].checked++,e.$save(a)},checks:function(a){return e[a].checked},resetList:function(){console.log("reset called!");for(var a=0;a<e.length;a++)e[a].checked=0,e.$save(a)}};return g}]),app.factory("Team",function(){var a=[{name:"Eric"},{name:"Ariel"}],b={all:a,memberCount:a.length};return b}),app.factory("User",["$rootScope","$firebase","FIREBASE_URL",function(a,b,c){function d(b){a.currentUser=f.findByUsername(b)}var e=new Firebase(c+"users"),f={setCurrent:function(b){a.currentUser=b},getCurrent:function(){return a.currentUser},signedIn:function(){return void 0!==a.currentUser}};return a.$on("$firebaseSimpleLogin:login",function(a,c){var f=b(e.startAt(c.uid).endAt(c.uid)).$asArray();f.$loaded(function(){d(f[0].username)})}),a.$on("$firebaseSimpleLogin:logout",function(){delete a.currentUser}),f}]),app.factory("Auth",["$rootScope","$firebaseSimpleLogin","FIREBASE_URL",function(a,b,c){var d=new Firebase(c),e=b(d),f={login:function(a){return e.$login("password",a)},signedIn:function(){return null!==e.user},logout:function(){e.$logout()}};return a.signedIn=function(){return f.signedIn()},f}]);